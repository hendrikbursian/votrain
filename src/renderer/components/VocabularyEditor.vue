<template>
    <div class="u-full-width">
        <transition-group tag="div" class="menu-bar u-full-width" name="slideLeft-fade">
            <button :key="1" v-on:click="$store.commit('toggleSearch')">
                <i class="material-icons">{{ search ? 'close' : 'search' }}</i>{{ search ? 'Abbrechen' : 'Suchen' }}
            </button>
            <button :key="2" v-on:click="$store.commit('toggleAddingVocabulary')">
                <i class="material-icons">{{ addingVocabulary ? 'close' : 'add' }}</i>{{ addingVocabulary ? 'Abbrechen' : 'Wort hinzuf√ºgen' }}
            </button>
            <input :key="3" type="text" v-if="addingVocabulary" v-model="newVocabulary.lang1" @keyup.enter="addVocabulary()" :placeholder="activeDictionary.lang1" autofocus>
            <input :key="4" type="text" v-if="addingVocabulary" v-model="newVocabulary.lang2" @keyup.enter="addVocabulary()" :placeholder="activeDictionary.lang2">
            <input :key="5" type="text" v-if="addingVocabulary" v-model="newVocabulary.note" @keyup.enter="addVocabulary()" placeholder="Notiz">
            <input :key="6" type="text" v-if="addingVocabulary" v-model="newVocabulary.category" @keyup.enter="addVocabulary()" placeholder="Kategorie">
            <button :key="7" v-if="addingVocabulary" v-on:click="addVocabulary()">
                <i class="material-icons">save</i> Speichern
            </button>
        </transition-group>
        <table class="u-full-width">
            <thead>
                <tr v-if="!search">
                    <th style="width:25%">{{ activeDictionary.lang1 }}</th>
                    <th style="width:25%">{{ activeDictionary.lang2 }}</th>
                    <th style="width:25%">Notiz</th>
                    <th style="width:25%">Kategorie</th>
                </tr>
                <tr v-if="search">
                    <th style="width:25%"><input type="text" v-model="query.lang1" :placeholder="activeDictionary.lang1" autofocus></th>
                    <th style="width:25%"><input type="text" v-model="query.lang2" :placeholder="activeDictionary.lang2"></th>
                    <th style="width:25%"><input type="text" v-model="query.note" placeholder="Notiz"></th>
                    <th style="width:25%"><input type="text" v-model="query.category" placeholder="Kategorie"></th>
                </tr>
            </thead>
            <tbody>
                <tr :key="index" v-for="(vocabulary, index) in filteredVocabularies">
                    <td>{{ vocabulary.lang1 }}</td>
                    <td>{{ vocabulary.lang2 }}</td>
                    <td>{{ vocabulary.note }}</td>
                    <td>{{ vocabulary.category }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</template>

<script>
import { mapGetters, mapState, mapActions } from 'vuex'

export default {
    computed: {
        ...mapState({
            search: 'search',
            query: 'query',
            addingVocabulary: 'addingVocabulary',
            newVocabulary: 'newVocabulary'
        }),
        ...mapGetters({
            activeDictionary: 'activeDictionary',
            filteredVocabularies: 'filteredVocabularies'
        })
    },
    methods: {
        ...mapActions({
            addVocabulary: 'addVocabulary'
        })
    }
}
</script>